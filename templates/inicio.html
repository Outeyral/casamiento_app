<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>NUESTROS MOMENTOS FAVORITOS</title>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
<style>
body {
    margin: 0;
    font-family: "Times New Roman", Times, serif;
    height: 100vh;
    background-color: #fdfdfd;
    position: relative;
    overflow: hidden;
}

#titulo {
    position: absolute;
    top: 20%;
    left: 50%;
    transform: translateX(-50%);
    color: black;
    font-size: 3rem;
    background-color: rgba(255,255,255,0.7);
    padding: 15px 30px;
    border-radius: 10px;
    z-index: 1000;
    text-align: center;
}

#add-photo-btn {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translateX(-50%);
    background-color: #333;
    color: white;
    font-size: 1.2rem;
    padding: 10px 25px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    z-index: 1000;
}

#photo-container {
    position: absolute;
    width: 100%;
    height: 100%;
    z-index: 0;
    overflow: hidden;
}

.photo-bg {
    position: absolute;
    border-radius: 10px;
    object-fit: cover;
    opacity: 0.75;
}
</style>
</head>
<body>

<div id="photo-container">
    {% for mesa, persona, filename, url in fotos %}
        <img src="{{ url }}" class="photo-bg">
    {% endfor %}
</div>

<div id="titulo">NUESTROS MOMENTOS FAVORITOS</div>
<button id="add-photo-btn" onclick="window.location.href='{{ url_for('subir') }}'">¡Agregá el tuyo!</button>

<script>
function placePhotos() {
    const container = document.getElementById('photo-container');
    const photos = Array.from(container.getElementsByClassName('photo-bg'));
    const cols = 6;
    const gap = 10;
    const containerWidth = window.innerWidth;
    const colWidth = (containerWidth - gap * (cols - 1)) / cols;
    const colHeights = Array(cols).fill(0);

    photos.forEach(img => {
        const height = Math.random() * 150 + 100;
        img.style.width = colWidth + "px";
        img.style.height = height + "px";

        const minCol = colHeights.indexOf(Math.min(...colHeights));
        const x = minCol * (colWidth + gap);
        const y = colHeights[minCol];

        img.style.left = x + "px";
        img.style.top = y + "px";

        colHeights[minCol] += height + gap;
    });

    container.style.height = Math.max(...colHeights) + "px";
}

placePhotos();
window.addEventListener("resize", placePhotos);
</script>

</body>
</html>
